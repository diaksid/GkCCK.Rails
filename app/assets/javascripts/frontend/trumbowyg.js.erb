(function ($, PRO) {
  var options = {
    svgPath: '<%= asset_path('trumbowyg/dist/ui/icons.svg') %>',
    lang: 'ru',
    btns: [
      ['viewHTML'],
      ['undo', 'redo'],
      ['strong', 'em', 'del'],
      ['insertImage', 'link'],
      ['fullscreen']
    ],
    autogrow: true
  }

  PRO.redactor = function () {
    var obj = $('[data-redactor]')
    if (obj.length) {
      var fn = function () {
        obj.each(function () {
          $(this).trumbowyg($.extend({},
            options,
            $(this).data('redactor')
          ))
        })
      }
      if ($.trumbowyg) {
        fn()
      } else {
        $
          .stylesheet('<%= asset_path('redactor.css') %>')
          .script('<%= asset_path('redactor.js') %>', fn)
      }
    }
    return this
  }
})($, PRO)
